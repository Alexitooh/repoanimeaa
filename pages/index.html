<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnimeFinder - Encuentra tus animes favoritos</title>
        <link rel="stylesheet" href="../styles/index.css">
    </head>
    <script>
document.getElementById('searchForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const animeName = document.getElementById('animeName').value;
    const loading = document.getElementById('loading');
    const errorMessage = document.getElementById('errorMessage');
    const resultsSection = document.getElementById('resultsSection');
    const recommendationsGrid = document.getElementById('recommendationsGrid');
    
    // Mostrar loading
    loading.style.display = 'block';
    errorMessage.style.display = 'none';
    
    // Buscar recomendaciones
    fetch('/api/recomendaciones', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            animeName: animeName
        })
    })
    .then(response => response.json())
    .then(data => {
        // Limpiar resultados anteriores
        recommendationsGrid.innerHTML = '';
        
        // Mostrar resultados
        data.animes.forEach(anime => {
            const animeElement = document.createElement('div');
            animeElement.className = 'anime-card';
            animeElement.innerHTML = `
                <h3>${anime.nombre}</h3>
                <p><strong>Género:</strong> ${anime.genero}</p>
                <p><strong>Puntuación:</strong> ${anime.puntuacion}/10</p>
                <p>${anime.descripcion}</p>
            `;
            recommendationsGrid.appendChild(animeElement);
        });
        
        resultsSection.style.display = 'block';
    })
    .catch(error => {
        console.error('Error:', error);
        errorMessage.textContent = 'Error al buscar recomendaciones';
        errorMessage.style.display = 'block';
    })
    .finally(() => {
        loading.style.display = 'none';
    });
});
</script>
<body>
    <header>
        <div class="container">
            <div class="logo">AnimeFinder</div>
            <p class="tagline">Descubre nuevos animes basados en tus preferencias</p>
        </div>
    </header>

    <div class="container">
        <section class="search-section">
            <h2 class="search-title">Busca tu anime favorito</h2>
            <form id="searchForm" class="search-form">
                <input type="text" id="animeName" class="search-input" placeholder="Escribe el nombre de un anime..." required>
                <button type="submit" class="search-button" id="searchButton">Buscar</button>
            </form>
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Buscando recomendaciones...</p>
            </div>
            <div class="error-message" id="errorMessage"></div>
        </section>

        <section class="results-section" id="resultsSection">
            <h2 class="section-title">Recomendaciones para ti</h2>
            <div class="recommendations-grid" id="recommendationsGrid">
                <!-- Las recomendaciones se insertarán aquí dinámicamente -->
            </div>
        </section>
    </div>

    <footer>
        <div class="container">
            <p>AnimeFinder &copy; 2023 - Todos los derechos reservados</p>
        </div>
    </footer>
